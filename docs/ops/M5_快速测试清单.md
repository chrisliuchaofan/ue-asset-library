# M5 快速测试清单

## 🧪 测试步骤（预计 10-15 分钟）

### 1. 测试 `/dashboard` 页面 ✅

**访问：** `http://localhost:3000/dashboard`（或你的 Vercel 地址）

**检查项：**
- [ ] 页面正常加载，显示用户信息
- [ ] 积分余额正确显示
- [ ] 计费模式显示正确（DRY_RUN/REAL）
- [ ] 模型模式显示正确（DRY_RUN/REAL）
- [ ] 用户 ID 正确显示
- [ ] "设置" 按钮可以点击，跳转到 `/settings`
- [ ] "登出" 按钮可以点击

**预期结果：**
- 所有信息正确显示
- 没有错误提示

---

### 2. 测试 `/settings` 页面 ✅

**访问：** `http://localhost:3000/settings`

**检查项：**
- [ ] 页面正常加载
- [ ] 个人信息卡片显示正确（邮箱、用户 ID）
- [ ] 积分信息卡片显示正确（余额、计费模式、模型模式）
- [ ] 交易记录表格显示（如果有交易记录）
- [ ] "刷新" 按钮可以点击
- [ ] "返回" 按钮可以点击，跳转到 `/dashboard`

**预期结果：**
- 所有信息正确显示
- 交易记录正确显示（如果有）
- 没有错误提示

---

### 3. 测试 `/admin/users` 页面 ✅

**访问：** `http://localhost:3000/admin/users`

**检查项：**
- [ ] 页面正常加载
- [ ] 用户列表正确显示（至少显示当前登录用户）
- [ ] 搜索功能正常（输入邮箱或姓名，列表过滤）
- [ ] 点击用户，右侧显示用户详情
- [ ] 用户详情显示正确（邮箱、姓名、用户 ID、积分余额、创建时间）
- [ ] 交易记录显示（如果有）
- [ ] 充值功能测试：
  - [ ] 输入充值金额（如 100）
  - [ ] 点击"充值"按钮
  - [ ] 显示成功提示
  - [ ] 用户余额更新
  - [ ] 交易记录更新

**预期结果：**
- 用户列表正确显示
- 搜索功能正常
- 用户详情正确显示
- 充值功能正常
- 没有错误提示

---

### 4. 测试后端 API（可选）✅

**如果前端测试有问题，可以测试后端 API：**

```bash
# 1. 获取用户列表
curl -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:3001/users/list

# 2. 获取交易记录
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "http://localhost:3001/credits/transactions?limit=10&offset=0"

# 3. 管理员充值（需要替换 YOUR_USER_ID）
curl -X POST \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"targetUserId":"YOUR_USER_ID","amount":100}' \
  http://localhost:3001/credits/admin/recharge
```

---

## 🐛 常见问题排查

### 问题 1：用户列表为空

**可能原因：**
- 后端数据库中没有用户
- 后端 `/users/list` 接口不可用

**解决方法：**
- 检查后端服务是否运行
- 检查数据库连接
- 检查后端日志

---

### 问题 2：交易记录为空

**可能原因：**
- 用户没有交易记录
- 后端 `/credits/transactions` 接口不可用

**解决方法：**
- 先进行一次充值或消费操作，生成交易记录
- 检查后端服务是否运行

---

### 问题 3：充值失败

**可能原因：**
- 后端 `/credits/admin/recharge` 接口不可用
- 权限问题

**解决方法：**
- 检查后端服务是否运行
- 检查后端日志
- 检查网络连接

---

### 问题 4：页面显示错误

**可能原因：**
- 前端 API 路由不可用
- 后端服务不可用
- 网络问题

**解决方法：**
- 检查浏览器控制台错误
- 检查网络请求（Network 标签）
- 检查后端服务状态

---

## ✅ 测试通过标准

**所有测试通过，如果：**
- ✅ `/dashboard` 页面正常显示用户信息
- ✅ `/settings` 页面正常显示个人信息和交易记录
- ✅ `/admin/users` 页面正常显示用户列表
- ✅ 充值功能正常工作
- ✅ 没有控制台错误
- ✅ 没有网络请求错误

---

## 🚀 测试完成后

**如果测试通过：**
- ✅ 可以继续 M6 开发

**如果测试有问题：**
- ⚠️ 先修复问题，再继续 M6
- ⚠️ 记录问题到 issue 或文档

---

**预计测试时间：** 10-15 分钟


