# ✅ 部署检查清单

使用这个清单来跟踪你的部署进度，确保每一步都完成了。

## 📦 第一步：准备代码仓库

- [ ] 在 GitHub 创建了新仓库
- [ ] 将代码推送到 GitHub
- [ ] 确认代码可以正常访问

**验证方法：**
```bash
# 在浏览器访问你的 GitHub 仓库
https://github.com/YOUR_USERNAME/YOUR_REPO_NAME
```

---

## 🚀 第二步：Vercel 部署

### 2.1 账号和项目

- [ ] 注册/登录 Vercel 账号
- [ ] 导入 GitHub 仓库到 Vercel
- [ ] 确认项目配置正确

### 2.2 环境变量配置

#### 必须配置：

- [ ] `NEXTAUTH_SECRET` - 已生成并配置
- [ ] `NEXTAUTH_URL` - 已设置为 Vercel 域名
- [ ] `BACKEND_API_URL` - 已配置（如果有后端）
- [ ] `USER_WHITELIST` - 已配置测试账号

#### OSS 配置（如果使用）：

- [ ] `OSS_BUCKET` - 已配置
- [ ] `OSS_REGION` - 已配置
- [ ] `OSS_ACCESS_KEY_ID` - 已配置
- [ ] `OSS_ACCESS_KEY_SECRET` - 已配置
- [ ] `NEXT_PUBLIC_CDN_BASE` - 已配置

#### AI 配置（如果使用）：

- [ ] `AI_IMAGE_API_KEY` - 已配置
- [ ] `AI_IMAGE_API_ENDPOINT` - 已配置
- [ ] `JIMENG_REQ_KEY` - 已配置（如果使用即梦）

### 2.3 部署

- [ ] 点击 Deploy 按钮
- [ ] 部署成功（状态显示 Ready）
- [ ] 可以访问 Vercel 提供的临时域名

**验证方法：**
```bash
# 访问 Vercel 提供的域名
https://your-project.vercel.app
```

---

## 🌐 第三步：域名配置

- [ ] 在 Vercel 添加了自定义域名
- [ ] 配置了 DNS 记录（A 记录或 CNAME）
- [ ] DNS 生效（Vercel 显示 Valid Configuration）
- [ ] 可以通过自定义域名访问网站

**验证方法：**
```bash
# 访问你的域名
https://your-domain.com
```

---

## 🧪 第四步：功能测试

### 基础功能

- [ ] 首页可以正常打开
- [ ] 页面样式正常显示
- [ ] 没有控制台错误（F12 查看）

### 核心功能

- [ ] 搜索功能正常
- [ ] 资产列表可以正常显示
- [ ] 资产详情页可以正常打开
- [ ] 图片/视频可以正常加载

### 认证功能（如果配置了）

- [ ] 登录页面可以打开
- [ ] 可以使用白名单账号登录
- [ ] 登录后可以正常使用功能

**验证方法：**
```bash
# 在浏览器控制台（F12）检查
# Console 标签页应该没有红色错误
# Network 标签页的请求应该都是 200 状态
```

---

## 🖥️ 第五步：后端部署（如果有）

### 服务器准备

- [ ] 购买了云服务器
- [ ] 可以通过 SSH 连接服务器
- [ ] 服务器已安装 Node.js

**验证方法：**
```bash
ssh root@你的服务器IP
node --version  # 应该显示版本号
```

### 代码部署

- [ ] 后端代码已上传到服务器
- [ ] 已安装依赖（`npm install`）
- [ ] 已构建项目（`npm run build`）

### 环境变量

- [ ] 创建了 `.env` 文件
- [ ] `PORT` 已配置
- [ ] `FRONTEND_URL` 已配置
- [ ] `JWT_SECRET` 已配置（与 Vercel 一致）
- [ ] `USER_WHITELIST` 已配置（与 Vercel 一致）

### 服务启动

- [ ] 已安装 PM2
- [ ] 服务已启动（`pm2 status` 显示 online）
- [ ] 服务已设置开机自启

**验证方法：**
```bash
# 在服务器上执行
pm2 status  # 应该显示 ue-assets-backend 为 online
curl http://localhost:3001/health  # 应该返回健康检查结果
```

### Nginx 配置（可选）

- [ ] 已安装 Nginx
- [ ] 已创建配置文件
- [ ] 已启用配置
- [ ] Nginx 测试通过（`nginx -t`）

### SSL 证书（可选）

- [ ] 已安装 Certbot
- [ ] 已申请 SSL 证书
- [ ] 可以通过 HTTPS 访问后端

### 后端域名

- [ ] 配置了后端域名 DNS（A 记录指向服务器 IP）
- [ ] 可以通过 `https://api.你的域名.com` 访问后端

**验证方法：**
```bash
# 在浏览器或终端
curl https://api.你的域名.com/health
# 应该返回健康检查结果
```

---

## 🔄 第六步：更新配置

- [ ] 更新了 Vercel 的 `BACKEND_API_URL` 为后端域名
- [ ] 重新部署了 Vercel 项目
- [ ] 前端可以正常调用后端 API

**验证方法：**
```bash
# 在浏览器控制台
fetch('https://api.你的域名.com/health')
  .then(r => r.json())
  .then(console.log)
# 应该返回健康检查结果
```

---

## 🎉 完成检查

### 最终验证

- [ ] 可以通过域名访问网站
- [ ] 所有功能正常工作
- [ ] 没有控制台错误
- [ ] 后端 API 正常响应（如果有）
- [ ] 可以正常登录和使用（如果配置了认证）

### 性能检查

- [ ] 页面加载速度正常
- [ ] 图片加载正常
- [ ] 没有明显的性能问题

---

## 📝 记录信息

为了方便以后维护，请记录以下信息：

### Vercel 信息

- Vercel 项目名称：`_________________`
- Vercel 项目 URL：`_________________`
- 自定义域名：`_________________`

### 后端信息（如果有）

- 服务器 IP：`_________________`
- 后端域名：`_________________`
- SSH 用户名：`_________________`

### 密钥信息（请妥善保管）

- NEXTAUTH_SECRET：`_________________`（已保存在安全的地方）
- JWT_SECRET：`_________________`（已保存在安全的地方）

### 账号信息

- GitHub 仓库：`_________________`
- 测试账号：`_________________`

---

## 🆘 遇到问题？

如果某个步骤无法完成，请：

1. ✅ 检查该步骤的验证方法
2. 📖 查看 `部署指南-小白版.md` 中的详细说明
3. 🔍 查看错误日志（Vercel 部署日志或服务器日志）
4. 💬 根据错误信息搜索解决方案

---

**最后更新日期：** _______________

**部署完成日期：** _______________







