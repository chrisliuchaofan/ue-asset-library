# ğŸ” æœåŠ¡å™¨è¯Šæ–­å’Œå¯åŠ¨æŒ‡å—

## æ­¥éª¤ 1ï¼šæ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦åœ¨è¿è¡Œ

åœ¨æœåŠ¡å™¨ç»ˆç«¯æ‰§è¡Œï¼š

```bash
# æ£€æŸ¥ 3002 ç«¯å£æ˜¯å¦è¢«å ç”¨
netstat -tuln | grep 3002
# æˆ–è€…
lsof -i :3002
# æˆ–è€…
ss -tuln | grep 3002
```

å¦‚æœ**æ²¡æœ‰è¾“å‡º**ï¼Œè¯´æ˜æœåŠ¡æ²¡æœ‰è¿è¡Œã€‚

## æ­¥éª¤ 2ï¼šæ£€æŸ¥æ˜¯å¦æœ‰åå°è¿›ç¨‹

```bash
# æ£€æŸ¥æ˜¯å¦æœ‰ node è¿›ç¨‹åœ¨è¿è¡Œ
ps aux | grep node
ps aux | grep "ts-node-dev"
ps aux | grep "nest"
```

## æ­¥éª¤ 3ï¼šå¯åŠ¨åç«¯æœåŠ¡

### æ–¹æ³• 1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
cd /opt/ue-assets-backend/backend-api
bash æœåŠ¡å™¨å¯åŠ¨åç«¯æœåŠ¡.sh
```

### æ–¹æ³• 2ï¼šæ‰‹åŠ¨å¯åŠ¨

```bash
cd /opt/ue-assets-backend/backend-api

# æ£€æŸ¥ç¯å¢ƒå˜é‡
cat .env | grep PORT

# å¯åŠ¨æœåŠ¡ï¼ˆä¼šåœ¨å‰å°è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°æ—¥å¿—ï¼‰
npm run start:dev
```

### æ–¹æ³• 3ï¼šåå°è¿è¡Œï¼ˆä½¿ç”¨ nohupï¼‰

```bash
cd /opt/ue-assets-backend/backend-api

# åå°è¿è¡Œï¼Œæ—¥å¿—è¾“å‡ºåˆ° nohup.out
nohup npm run start:dev > backend.log 2>&1 &

# æŸ¥çœ‹è¿›ç¨‹ ID
echo $!

# æŸ¥çœ‹æ—¥å¿—
tail -f backend.log
```

### æ–¹æ³• 4ï¼šä½¿ç”¨ screenï¼ˆæ¨èç”¨äºé•¿æœŸè¿è¡Œï¼‰

```bash
# å®‰è£… screenï¼ˆå¦‚æœæ²¡æœ‰ï¼‰
# yum install screen  # CentOS/RHEL
# apt-get install screen  # Ubuntu/Debian

# åˆ›å»ºæ–°çš„ screen ä¼šè¯
screen -S backend

# åœ¨ screen ä¸­å¯åŠ¨æœåŠ¡
cd /opt/ue-assets-backend/backend-api
npm run start:dev

# æŒ‰ Ctrl+A ç„¶åæŒ‰ D æ¥åˆ†ç¦»ä¼šè¯ï¼ˆæœåŠ¡ç»§ç»­è¿è¡Œï¼‰

# é‡æ–°è¿æ¥ä¼šè¯
screen -r backend

# æŸ¥çœ‹æ‰€æœ‰ä¼šè¯
screen -ls
```

## æ­¥éª¤ 4ï¼šéªŒè¯æœåŠ¡å·²å¯åŠ¨

æœåŠ¡å¯åŠ¨åï¼Œåº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š

```
[Nest] XXXX  - 12/15/2025, X:XX:XX PM     LOG [NestFactory] Starting Nest application...
[Nest] XXXX  - 12/15/2025, X:XX:XX PM     LOG [InstanceLoader] ...
[Nest] XXXX  - 12/15/2025, X:XX:XX PM     LOG [NestApplication] Nest application successfully started
Backend API running on port 3002
```

ç„¶åæµ‹è¯•æœåŠ¡ï¼š

```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
curl http://localhost:3002/health

# æˆ–è€…æµ‹è¯•æ ¹è·¯å¾„
curl http://localhost:3002/
```

## æ­¥éª¤ 5ï¼šåˆ›å»ºç”¨æˆ·

æœåŠ¡è¿è¡Œåï¼Œæ‰§è¡Œï¼š

```bash
# 1. æ³¨å†Œ test@factory-buy.com
curl -X POST http://localhost:3002/users/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@factory-buy.com","password":"password123","name":"æµ‹è¯•ç”¨æˆ·"}'

# 2. æ³¨å†Œ admin@admin.local
curl -X POST http://localhost:3002/users/register \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@admin.local","password":"admin123","name":"ç®¡ç†å‘˜"}'
```

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šç«¯å£è¢«å ç”¨

```bash
# æŸ¥æ‰¾å ç”¨ 3002 ç«¯å£çš„è¿›ç¨‹
lsof -i :3002
# æˆ–è€…
netstat -tuln | grep 3002

# æ€æ­»è¿›ç¨‹ï¼ˆæ›¿æ¢ PID ä¸ºå®é™…è¿›ç¨‹ IDï¼‰
kill -9 <PID>
```

### é—®é¢˜ 2ï¼šä¾èµ–æœªå®‰è£…

```bash
cd /opt/ue-assets-backend/backend-api
npm install
```

### é—®é¢˜ 3ï¼šç¯å¢ƒå˜é‡æœªé…ç½®

```bash
cd /opt/ue-assets-backend/backend-api

# æ£€æŸ¥ .env æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la .env

# æŸ¥çœ‹ç¯å¢ƒå˜é‡
cat .env | grep -E "PORT|DATABASE|OSS"
```

### é—®é¢˜ 4ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

æ£€æŸ¥ï¼š
1. Docker å®¹å™¨æ˜¯å¦è¿è¡Œï¼š`docker ps | grep postgres`
2. æ•°æ®åº“è¿æ¥é…ç½®æ˜¯å¦æ­£ç¡®ï¼š`cat .env | grep DATABASE`
3. æ•°æ®åº“æ˜¯å¦å¯è®¿é—®ï¼š`docker exec -it <postgres_container> psql -U ue_user -d ue_assets`

## ğŸ“ å®Œæ•´æ“ä½œæµç¨‹

```bash
# 1. è¿›å…¥åç«¯ç›®å½•
cd /opt/ue-assets-backend/backend-api

# 2. æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ
lsof -i :3002

# 3. å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œå¯åŠ¨æœåŠ¡ï¼ˆé€‰æ‹©ä¸€ç§æ–¹å¼ï¼‰
# æ–¹å¼ Aï¼šå‰å°è¿è¡Œï¼ˆå¯ä»¥çœ‹åˆ°æ—¥å¿—ï¼‰
npm run start:dev

# æ–¹å¼ Bï¼šåå°è¿è¡Œ
nohup npm run start:dev > backend.log 2>&1 &

# æ–¹å¼ Cï¼šä½¿ç”¨ screen
screen -S backend
npm run start:dev
# æŒ‰ Ctrl+A ç„¶å D åˆ†ç¦»

# 4. ç­‰å¾…æœåŠ¡å¯åŠ¨ï¼ˆçœ‹åˆ° "Backend API running on port 3002"ï¼‰

# 5. æµ‹è¯•æœåŠ¡
curl http://localhost:3002/

# 6. åˆ›å»ºç”¨æˆ·
curl -X POST http://localhost:3002/users/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@factory-buy.com","password":"password123","name":"æµ‹è¯•ç”¨æˆ·"}'

curl -X POST http://localhost:3002/users/register \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@admin.local","password":"admin123","name":"ç®¡ç†å‘˜"}'
```


