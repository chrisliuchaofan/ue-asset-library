# ============================================
# 环境变量配置模板
# ============================================
# 使用方法：
# 1. 复制此文件为 .env（后端）或 .env.local（前端）
# 2. 替换所有占位符（your-xxx）为实际值
# 3. 确保敏感信息不要提交到 Git
# ============================================

# ============================================
# Vercel 前端环境变量（在 Vercel Dashboard 配置）
# ============================================

# NextAuth 认证配置
NEXTAUTH_SECRET=your-secret-key-change-in-production  # ✅ 必须：使用 openssl rand -base64 32 生成
NEXTAUTH_URL=https://your-app.vercel.app  # ✅ 必须：与 Vercel 域名一致

# Supabase 配置（已迁移至 Supabase，不再需要后端）
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co  # ✅ 必须：Supabase 项目 URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key  # ✅ 必须：Supabase 匿名密钥（客户端可访问）
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key  # ✅ 必须：服务端使用，不要暴露到客户端

# 用户白名单（用于登录测试）
ADMIN_USERS=admin:admin123,user1:password1  # ✅ 格式：用户名:密码,用户名:密码

# OSS 配置（如果使用 OSS 存储）
OSS_BUCKET=your-bucket-name
OSS_REGION=oss-cn-hangzhou
OSS_ACCESS_KEY_ID=your-access-key-id
OSS_ACCESS_KEY_SECRET=your-access-key-secret
NEXT_PUBLIC_OSS_BUCKET=your-bucket-name
NEXT_PUBLIC_OSS_REGION=oss-cn-hangzhou
NEXT_PUBLIC_CDN_BASE=https://your-cdn-domain.com

# AI 服务配置
AI_IMAGE_API_KEY=your-qwen-api-key
AI_IMAGE_API_ENDPOINT=https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation
AI_IMAGE_API_MODEL=qwen-plus-latest

# 存储模式
STORAGE_MODE=oss
NEXT_PUBLIC_STORAGE_MODE=oss

# ============================================
# ECS 后端环境变量（在服务器 .env 文件配置）
# ============================================

# 服务器配置
PORT=3001
NODE_ENV=production

# 前端地址（CORS）
FRONTEND_URL=https://your-app.vercel.app  # ✅ 必须：Vercel 域名
ALLOWED_ORIGINS=https://your-app.vercel.app,https://your-app-git-main.vercel.app  # ✅ 新增：所有 Vercel 域名

# JWT 密钥（必须与前端一致）
JWT_SECRET=your-jwt-secret-key  # ✅ 必须：与前端 NEXTAUTH_SECRET 一致
NEXTAUTH_SECRET=your-secret-key-change-in-production  # ✅ 可选：与 JWT_SECRET 相同即可

# 用户白名单（必须与前端一致）
USER_WHITELIST=admin@admin.local:admin123,user1@admin.local:password1  # ✅ 格式：邮箱:密码
ADMIN_USERS=admin:admin123,user1:password1  # ✅ 兼容配置

# 数据库配置（Docker 容器间连接）
DB_HOST=postgres  # ✅ 必须：使用 Docker 服务名，不是 localhost
DB_PORT=5432
DB_NAME=ue_assets
DB_USERNAME=postgres
DB_PASSWORD=your-db-password  # ✅ 必须：强密码

# 积分系统配置
INITIAL_CREDITS=100

# ============================================
# Docker Compose 环境变量（在 .env 文件配置）
# ============================================

# 数据库配置
DB_NAME=ue_assets
DB_USERNAME=postgres
DB_PASSWORD=your-db-password  # ✅ 必须：强密码
DB_PORT=5432

# JWT 配置
JWT_SECRET=your-jwt-secret-key  # ✅ 必须：与前端一致
NEXTAUTH_SECRET=your-secret-key-change-in-production  # ✅ 可选

# CORS 配置
FRONTEND_URL=https://your-app.vercel.app
ALLOWED_ORIGINS=https://your-app.vercel.app,https://your-app-git-main.vercel.app

# 用户白名单
USER_WHITELIST=admin@admin.local:admin123,user1@admin.local:password1
ADMIN_USERS=admin:admin123,user1:password1

# ============================================
# 密钥生成命令
# ============================================

# 生成 NEXTAUTH_SECRET（32 字节 base64）
# openssl rand -base64 32

# 生成 JWT_SECRET（32 字节 base64）
# openssl rand -base64 32

# ============================================
# 配置检查清单
# ============================================

# Vercel 配置：
# [ ] NEXTAUTH_SECRET 已配置（强随机密钥，32+ 字符）
# [ ] NEXTAUTH_URL 已配置（与 Vercel 域名一致）
# [ ] NEXT_PUBLIC_SUPABASE_URL 已配置（Supabase 项目 URL）
# [ ] SUPABASE_SERVICE_ROLE_KEY 已配置（Supabase 服务角色密钥）
# [ ] ADMIN_USERS 已配置（至少一个测试账号）

# 注意：项目已迁移至 Supabase，不再需要后端服务



