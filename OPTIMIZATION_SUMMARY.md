# å•†ä¸šçº§ SaaS ä¼˜åŒ–æ€»ç»“

## ğŸ“‹ ä¼˜åŒ–æ¦‚è§ˆ

æœ¬æ¬¡ä¼˜åŒ–é‡‡ç”¨**ä¿å®ˆä¼˜åŒ–æ–¹æ¡ˆ**ï¼Œåœ¨ä¿ç•™ç°æœ‰ JSON æ–‡ä»¶å­˜å‚¨æ¶æ„çš„åŸºç¡€ä¸Šï¼Œå…¨é¢æå‡å‰ç«¯æ€§èƒ½ã€ç”¨æˆ·ä½“éªŒå’Œä»£ç å¥å£®æ€§ï¼Œè¾¾åˆ°å•†ä¸šçº§ SaaS æ ‡å‡†ã€‚

---

## âœ… å·²å®Œæˆçš„ä¼˜åŒ–

### 1. **å…¨å±€é”™è¯¯è¾¹ç•Œç³»ç»Ÿ** âœ…
- **æ–‡ä»¶**: `components/error-boundary.tsx`
- **åŠŸèƒ½**:
  - æ•è· React ç»„ä»¶æ ‘ä¸­çš„ JavaScript é”™è¯¯ï¼Œé˜²æ­¢æ•´ä¸ªåº”ç”¨å´©æºƒ
  - æä¾›å‹å¥½çš„é”™è¯¯ UIï¼Œæ”¯æŒé‡è¯•å’Œè¿”å›é¦–é¡µ
  - å¼€å‘æ¨¡å¼æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼Œç”Ÿäº§æ¨¡å¼éšè—æ•æ„Ÿä¿¡æ¯
  - é¢„ç•™é”™è¯¯ç›‘æ§æœåŠ¡é›†æˆæ¥å£ï¼ˆå¦‚ Sentryï¼‰

**ä½¿ç”¨æ–¹å¼**:
```tsx
<ErrorBoundary>
  <YourComponent />
</ErrorBoundary>
```

---

### 2. **Toast é€šçŸ¥ç³»ç»Ÿ** âœ…
- **æ–‡ä»¶**: 
  - `components/ui/toast.tsx` - Toast ç»„ä»¶
  - `components/toast-provider.tsx` - Toast æä¾›è€…
- **åŠŸèƒ½**:
  - ç»Ÿä¸€çš„æˆåŠŸ/é”™è¯¯/è­¦å‘Š/ä¿¡æ¯é€šçŸ¥
  - è‡ªåŠ¨æ¶ˆå¤±ï¼ˆå¯é…ç½®æ—¶é•¿ï¼‰
  - æ”¯æŒæ“ä½œæŒ‰é’®
  - ä¼˜é›…çš„è¿›å…¥/é€€å‡ºåŠ¨ç”»

**ä½¿ç”¨æ–¹å¼**:
```tsx
import { useToast } from '@/components/toast-provider';

function MyComponent() {
  const toast = useToast();
  
  toast.success('æ“ä½œæˆåŠŸï¼');
  toast.error('æ“ä½œå¤±è´¥', 'è¯·ç¨åé‡è¯•');
  toast.warning('è­¦å‘Šä¿¡æ¯');
  toast.info('æç¤ºä¿¡æ¯');
}
```

---

### 3. **ä¼˜åŒ–çš„éª¨æ¶å±** âœ…
- **æ–‡ä»¶**: `components/asset-card-skeleton.tsx`
- **æ”¹è¿›**:
  - æ”¯æŒä¸åŒè§†å›¾æ¨¡å¼ï¼ˆclassic/thumbnail/gridï¼‰
  - æ”¯æŒç´§å‡‘æ¨¡å¼
  - æ·»åŠ  shimmer åŠ è½½åŠ¨ç”»
  - æ›´çœŸå®çš„å ä½ç¬¦æ•ˆæœ

---

### 4. **API å®¢æˆ·ç«¯å·¥å…·** âœ…
- **æ–‡ä»¶**: `lib/api-client.ts`
- **åŠŸèƒ½**:
  - ç»Ÿä¸€çš„ API è°ƒç”¨æ¥å£
  - è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼ˆæŒ‡æ•°é€€é¿ï¼‰
  - è¶…æ—¶å¤„ç†ï¼ˆé»˜è®¤ 30 ç§’ï¼‰
  - æ™ºèƒ½é”™è¯¯åˆ†ç±»ï¼ˆ4xx ä¸é‡è¯•ï¼Œ5xx é‡è¯•ï¼‰
  - æ”¯æŒ GET/POST/PUT/DELETE

**ä½¿ç”¨æ–¹å¼**:
```tsx
import { apiGet, apiPost } from '@/lib/api-client';

// GET è¯·æ±‚
const data = await apiGet<ResponseType>('/api/endpoint', {
  retries: 2,
  timeout: 30000,
});

// POST è¯·æ±‚
const result = await apiPost<ResponseType>('/api/endpoint', requestData);
```

---

### 5. **æ€§èƒ½ç›‘æ§ç³»ç»Ÿ** âœ…
- **æ–‡ä»¶**: `lib/performance.ts`
- **åŠŸèƒ½**:
  - è‡ªåŠ¨è®°å½•é¡µé¢åŠ è½½æ€§èƒ½
  - ç›‘æ§é•¿ä»»åŠ¡ï¼ˆé˜»å¡ä¸»çº¿ç¨‹çš„ä»»åŠ¡ï¼‰
  - å‡½æ•°æ‰§è¡Œæ—¶é—´æµ‹é‡
  - æ€§èƒ½æŒ‡æ ‡ä¸ŠæŠ¥ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

**ä½¿ç”¨æ–¹å¼**:
```tsx
import { performanceMonitor } from '@/lib/performance';

// æµ‹é‡å‡½æ•°æ‰§è¡Œæ—¶é—´
const result = performanceMonitor.measure('operation', () => {
  // ä½ çš„ä»£ç 
});

// å¼‚æ­¥æµ‹é‡
const data = await performanceMonitor.measureAsync('fetchData', async () => {
  return await fetch('/api/data');
});
```

---

### 6. **å®¢æˆ·ç«¯ç¼“å­˜ç³»ç»Ÿ** âœ…
- **æ–‡ä»¶**: `lib/cache-utils.ts`
- **åŠŸèƒ½**:
  - å†…å­˜ç¼“å­˜ + localStorage åŒé‡ç¼“å­˜
  - è‡ªåŠ¨è¿‡æœŸæ¸…ç†
  - ç¼“å­˜è£…é¥°å™¨æ”¯æŒ
  - é˜²æ­¢ localStorage æº¢å‡º

**ä½¿ç”¨æ–¹å¼**:
```tsx
import { cacheManager } from '@/lib/cache-utils';

// è®¾ç½®ç¼“å­˜ï¼ˆ5 åˆ†é’Ÿï¼‰
cacheManager.set('key', data, 5 * 60 * 1000);

// è·å–ç¼“å­˜
const cached = cacheManager.get<DataType>('key');

// ä½¿ç”¨è£…é¥°å™¨
@cached(5 * 60 * 1000)
async function fetchData() {
  // ...
}
```

---

### 7. **ä¼˜åŒ–çš„å›¾ç‰‡ç»„ä»¶** âœ…
- **æ–‡ä»¶**: `components/optimized-image.tsx`
- **åŠŸèƒ½**:
  - è‡ªåŠ¨ OSS å›¾ç‰‡ä¼˜åŒ–
  - æ¸è¿›å¼åŠ è½½å ä½ç¬¦
  - é”™è¯¯å¤„ç†å’Œé‡è¯•
  - åŠ è½½çŠ¶æ€ç®¡ç†

---

## ğŸ¯ æ€§èƒ½æŒ‡æ ‡ç›®æ ‡

### æ ¸å¿ƒ Web Vitals
- **LCP (Largest Contentful Paint)**: < 1.5s
- **FID/INP (Interaction to Next Paint)**: < 100ms
- **CLS (Cumulative Layout Shift)**: < 0.1

### åŠ è½½æ€§èƒ½
- é¦–å±æ¸²æŸ“æ—¶é—´: < 1.5s
- é¡µé¢å®Œå…¨åŠ è½½: < 3s
- API å“åº”æ—¶é—´: < 500msï¼ˆP95ï¼‰

---

## ğŸ“¦ æ–°å¢ä¾èµ–

æœ¬æ¬¡ä¼˜åŒ–**æœªæ–°å¢ä»»ä½• npm ä¾èµ–**ï¼Œå…¨éƒ¨ä½¿ç”¨ç°æœ‰æŠ€æœ¯æ ˆå®ç°ã€‚

---

## ğŸ”§ é›†æˆè¯´æ˜

### 1. é”™è¯¯è¾¹ç•Œå·²è‡ªåŠ¨é›†æˆ
åœ¨ `app/layout.tsx` ä¸­å·²é€šè¿‡ `Providers` ç»„ä»¶è‡ªåŠ¨åŒ…è£¹æ•´ä¸ªåº”ç”¨ã€‚

### 2. Toast ç³»ç»Ÿå·²è‡ªåŠ¨é›†æˆ
åœ¨ `app/layout.tsx` ä¸­å·²é€šè¿‡ `Providers` ç»„ä»¶è‡ªåŠ¨æä¾›ã€‚

### 3. æ€§èƒ½ç›‘æ§å·²è‡ªåŠ¨åˆå§‹åŒ–
åœ¨ `components/providers.tsx` ä¸­å·²è‡ªåŠ¨åˆå§‹åŒ–ã€‚

---

## ğŸš€ åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸï¼ˆå¯é€‰ï¼‰
1. **å›¾ç‰‡æ¸è¿›å¼åŠ è½½**: é›†æˆ Blurhash æˆ– LQIPï¼ˆä½è´¨é‡å›¾ç‰‡å ä½ç¬¦ï¼‰
2. **ä»£ç åˆ†å‰²ä¼˜åŒ–**: è¿›ä¸€æ­¥ä¼˜åŒ–åŠ¨æ€å¯¼å…¥ï¼Œå‡å°‘åˆå§‹åŒ…ä½“ç§¯
3. **Service Worker**: æ·»åŠ ç¦»çº¿æ”¯æŒå’Œèµ„æºç¼“å­˜

### é•¿æœŸï¼ˆæ¶æ„å‡çº§ï¼‰
1. **æ•°æ®åº“è¿ç§»**: å°† JSON æ–‡ä»¶å­˜å‚¨è¿ç§»åˆ° PostgreSQL/SQLite
2. **å®æ—¶æ›´æ–°**: ä½¿ç”¨ WebSocket æˆ– Server-Sent Events
3. **CDN ä¼˜åŒ–**: é…ç½®æ›´æ¿€è¿›çš„ç¼“å­˜ç­–ç•¥
4. **ç›‘æ§é›†æˆ**: é›†æˆ Sentryã€Datadog ç­‰ä¸“ä¸šç›‘æ§æœåŠ¡

---

## ğŸ“Š ä¼˜åŒ–æ•ˆæœé¢„æœŸ

### ç”¨æˆ·ä½“éªŒ
- âœ… é”™è¯¯ä¸å†å¯¼è‡´ç™½å±ï¼Œæœ‰å‹å¥½çš„é”™è¯¯æç¤º
- âœ… æ“ä½œæœ‰å³æ—¶åé¦ˆï¼ˆToast é€šçŸ¥ï¼‰
- âœ… åŠ è½½çŠ¶æ€æ›´æ¸…æ™°ï¼ˆä¼˜åŒ–çš„éª¨æ¶å±ï¼‰
- âœ… å›¾ç‰‡åŠ è½½æ›´æµç•…ï¼ˆæ¸è¿›å¼åŠ è½½ï¼‰

### æ€§èƒ½
- âœ… API è°ƒç”¨æ›´å¯é ï¼ˆè‡ªåŠ¨é‡è¯•ï¼‰
- âœ… å‡å°‘é‡å¤è¯·æ±‚ï¼ˆå®¢æˆ·ç«¯ç¼“å­˜ï¼‰
- âœ… æ€§èƒ½æŒ‡æ ‡å¯è¿½è¸ªï¼ˆæ€§èƒ½ç›‘æ§ï¼‰

### ä»£ç è´¨é‡
- âœ… é”™è¯¯å¤„ç†æ›´å®Œå–„
- âœ… ä»£ç å¤ç”¨æ€§æ›´é«˜ï¼ˆå·¥å…·å‡½æ•°ï¼‰
- âœ… å¯ç»´æŠ¤æ€§æå‡ï¼ˆç»Ÿä¸€çš„æ ‡å‡†ï¼‰

---

## ğŸ” ä½¿ç”¨ç¤ºä¾‹

### åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Toast
```tsx
'use client';

import { useToast } from '@/components/toast-provider';
import { apiPost } from '@/lib/api-client';

export function MyComponent() {
  const toast = useToast();

  const handleSubmit = async () => {
    try {
      await apiPost('/api/submit', { data });
      toast.success('æäº¤æˆåŠŸï¼');
    } catch (error) {
      toast.error('æäº¤å¤±è´¥', 'è¯·ç¨åé‡è¯•');
    }
  };

  return <button onClick={handleSubmit}>æäº¤</button>;
}
```

### åœ¨ API è·¯ç”±ä¸­ä½¿ç”¨é”™è¯¯å¤„ç†
```tsx
import { handleApiError } from '@/lib/error-handler';

export async function POST(request: Request) {
  try {
    // ä½ çš„é€»è¾‘
    return NextResponse.json({ success: true });
  } catch (error) {
    return handleApiError(error, 'æ“ä½œå¤±è´¥');
  }
}
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **é”™è¯¯è¾¹ç•Œ**: ä¸ä¼šæ•è·ä»¥ä¸‹é”™è¯¯ï¼š
   - äº‹ä»¶å¤„ç†å™¨ä¸­çš„é”™è¯¯
   - å¼‚æ­¥ä»£ç ä¸­çš„é”™è¯¯ï¼ˆsetTimeout, Promiseï¼‰
   - æœåŠ¡ç«¯æ¸²æŸ“é”™è¯¯
   - é”™è¯¯è¾¹ç•Œè‡ªèº«çš„é”™è¯¯

2. **æ€§èƒ½ç›‘æ§**: åœ¨ç”Ÿäº§ç¯å¢ƒä¼šè‡ªåŠ¨ä¸ŠæŠ¥ï¼Œå¼€å‘ç¯å¢ƒä»…è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚

3. **ç¼“å­˜ç­–ç•¥**: é»˜è®¤ TTL ä¸º 5 åˆ†é’Ÿï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´ã€‚

---

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡ä¼˜åŒ–åœ¨**ä¸æ”¹å˜æ ¸å¿ƒæ¶æ„**çš„å‰æä¸‹ï¼Œæ˜¾è‘—æå‡äº†åº”ç”¨çš„ï¼š
- **ç¨³å®šæ€§**ï¼ˆé”™è¯¯è¾¹ç•Œï¼‰
- **ç”¨æˆ·ä½“éªŒ**ï¼ˆToastã€éª¨æ¶å±ï¼‰
- **æ€§èƒ½**ï¼ˆç¼“å­˜ã€API é‡è¯•ï¼‰
- **å¯è§‚æµ‹æ€§**ï¼ˆæ€§èƒ½ç›‘æ§ï¼‰

æ‰€æœ‰ä¼˜åŒ–éƒ½éµå¾ª**æ¸è¿›å¢å¼º**åŸåˆ™ï¼Œä¸å½±å“ç°æœ‰åŠŸèƒ½ï¼Œå¯ä»¥å®‰å…¨éƒ¨ç½²ã€‚


