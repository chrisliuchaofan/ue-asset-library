# å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## ğŸ¯ éƒ¨ç½²ç›®æ ‡

- **å‰ç«¯**ï¼šéƒ¨ç½²åˆ° Vercelï¼ˆè‡ªåŠ¨éƒ¨ç½²ï¼‰
- **åç«¯**ï¼šéƒ¨ç½²åˆ° ECS æœåŠ¡å™¨ï¼ˆæ‰‹åŠ¨éƒ¨ç½²ï¼‰

## ğŸ“¦ æœ¬æ¬¡å˜æ›´æ€»ç»“

### å‰ç«¯å˜æ›´
- âœ… ç»Ÿä¸€é”™è¯¯å¤„ç†ç³»ç»Ÿ
- âœ… æ”¹è¿›é”™è¯¯æ˜¾ç¤º UI
- âœ… æ¨¡å¼åˆ‡æ¢åŠŸèƒ½
- âœ… å……å€¼åŠŸèƒ½ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

### åç«¯å˜æ›´
- âœ… æ·»åŠ å……å€¼æ¥å£

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1ï¼šæäº¤ä»£ç 

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
cd /Users/chrisl/Documents/æ’æ˜ŸUEèµ„äº§åº“/web

# æ£€æŸ¥å˜æ›´
git status

# æ·»åŠ æ‰€æœ‰å˜æ›´
git add .

# æäº¤
git commit -m "feat: M4å®Œæˆ - é”™è¯¯å¤„ç†ã€æ¨¡å¼åˆ‡æ¢ã€å……å€¼åŠŸèƒ½"

# æ¨é€åˆ°è¿œç¨‹
git push origin main  # æˆ–ä½ çš„åˆ†æ”¯å
```

### æ­¥éª¤ 2ï¼šå‰ç«¯è‡ªåŠ¨éƒ¨ç½²ï¼ˆVercelï¼‰

Vercel ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°ä»£ç æ¨é€å¹¶å¼€å§‹éƒ¨ç½²ã€‚

**éªŒè¯**ï¼š
1. è®¿é—® Vercel Dashboard
2. æŸ¥çœ‹æœ€æ–°éƒ¨ç½²çŠ¶æ€
3. éƒ¨ç½²å®Œæˆåè®¿é—®ç½‘ç«™æµ‹è¯•

### æ­¥éª¤ 3ï¼šåç«¯æ‰‹åŠ¨éƒ¨ç½²ï¼ˆECSï¼‰

#### 3.1 åœ¨æœ¬åœ°æ„å»º

```bash
cd backend-api
npm install
npm run build
```

#### 3.2 ä¸Šä¼ åˆ°æœåŠ¡å™¨

```bash
# æ›¿æ¢ä¸ºå®é™…æœåŠ¡å™¨ä¿¡æ¯
SERVER_IP="your-server-ip"
SERVER_USER="root"

# ä¸Šä¼ æ„å»ºåçš„æ–‡ä»¶
scp -r dist/ $SERVER_USER@$SERVER_IP:/opt/ue-assets-backend/backend-api/
scp package.json $SERVER_USER@$SERVER_IP:/opt/ue-assets-backend/backend-api/
scp ecosystem.config.js $SERVER_USER@$SERVER_IP:/opt/ue-assets-backend/backend-api/
```

#### 3.3 åœ¨æœåŠ¡å™¨ä¸Šé‡å¯

```bash
# SSH åˆ°æœåŠ¡å™¨
ssh $SERVER_USER@$SERVER_IP

# è¿›å…¥åç«¯ç›®å½•
cd /opt/ue-assets-backend/backend-api

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰
npm install --production

# é‡å¯æœåŠ¡
pm2 restart ue-assets-backend

# æŸ¥çœ‹æ—¥å¿—
pm2 logs ue-assets-backend --lines 30
```

## âœ… éƒ¨ç½²éªŒè¯

### å‰ç«¯éªŒè¯

1. **è®¿é—®ç½‘ç«™**
   ```
   https://your-domain.vercel.app
   ```

2. **æµ‹è¯•é”™è¯¯æ˜¾ç¤º**
   - åˆ‡æ¢åˆ° REAL æ¨¡å¼
   - å°è¯•ç”Ÿæˆå†…å®¹ï¼ˆä½™é¢ä¸è¶³æ—¶ä¼šæ˜¾ç¤ºå‹å¥½é”™è¯¯ï¼‰

3. **æµ‹è¯•æ¨¡å¼åˆ‡æ¢**
   - ç‚¹å‡»å³ä¸Šè§’çš„æ¨¡å¼æ ‡ç­¾
   - ç¡®è®¤å¯ä»¥åˆ‡æ¢ DRY_RUN â†” REAL

4. **æµ‹è¯•å……å€¼åŠŸèƒ½**ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
   - ç‚¹å‡»"ğŸ’° +100ç§¯åˆ†"æŒ‰é’®
   - ç¡®è®¤å……å€¼æˆåŠŸ

### åç«¯éªŒè¯

```bash
# å¥åº·æ£€æŸ¥
curl https://api.your-domain.com/health

# åº”è¯¥è¿”å›ï¼š{"status":"ok"}
```

## ğŸ”§ å¦‚æœé‡åˆ°é—®é¢˜

### å‰ç«¯éƒ¨ç½²å¤±è´¥

1. æ£€æŸ¥ Vercel æ„å»ºæ—¥å¿—
2. ç¡®è®¤ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®
3. æ£€æŸ¥ä»£ç æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯

### åç«¯éƒ¨ç½²å¤±è´¥

1. **æ£€æŸ¥ PM2 çŠ¶æ€**
   ```bash
   pm2 status
   pm2 logs ue-assets-backend
   ```

2. **æ£€æŸ¥æ–‡ä»¶æƒé™**
   ```bash
   ls -la /opt/ue-assets-backend/backend-api
   ```

3. **æ£€æŸ¥ç«¯å£å ç”¨**
   ```bash
   netstat -tulpn | grep 3001
   ```

4. **æ‰‹åŠ¨é‡å¯**
   ```bash
   pm2 stop ue-assets-backend
   pm2 start /opt/ue-assets-backend/backend-api/dist/main.js --name ue-assets-backend
   ```

## ğŸ“ é‡è¦æé†’

1. **å……å€¼æ¥å£**ï¼šç”Ÿäº§ç¯å¢ƒé»˜è®¤ç¦ç”¨ï¼Œå¦‚éœ€å¯ç”¨éœ€è®¾ç½® `ALLOW_RECHARGE=true`
2. **é”™è¯¯è¿½è¸ª**ï¼šå¼€å‘ç¯å¢ƒæ˜¾ç¤ºè¿½è¸ª IDï¼Œç”Ÿäº§ç¯å¢ƒéšè—
3. **æ¨¡å¼åˆ‡æ¢**ï¼šå‰ç«¯çŠ¶æ€åˆ‡æ¢ï¼Œå®é™…æ¨¡å¼ç”±åç«¯æ§åˆ¶
4. **æ•°æ®åº“å¤‡ä»½**ï¼šéƒ¨ç½²å‰å»ºè®®å¤‡ä»½æ•°æ®åº“

## ğŸ‰ éƒ¨ç½²å®Œæˆ

éƒ¨ç½²å®Œæˆåï¼Œæ‰€æœ‰æ–°åŠŸèƒ½åº”è¯¥éƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼


